<div class="page-content">
  <div class="teams-tab-container">
    <app-slide-tab [tabs]="tabs" [selected]="selectedTab" (onChange)="changeTab($event)">
    </app-slide-tab>
    <div class="v-center justify-content-end mt-xl-0 mt-lg-0 mt-md-0 mt-sm-3 mt-3" *ngIf="teams.length + invitedTeams.length && selectedTab.id === 'teams'">
      <button class="btn btn-blue text-white f-4">Join team</button>
      <button class="v-center btn btn-blue f-4 text-white ml-2">
        <i class="bgc-white i-icon i-plus mr-2"></i>
        Create new team
      </button>
    </div>
    <div class="v-center justify-content-end mt-xl-0 mt-lg-0 mt-md-0 mt-sm-3 mt-3" *ngIf="selectedTab.id === 'calls'">
      <button class="v-center btn btn-blue f-4 text-white ml-2" (click)="joinCallRequest()">
        <i class="bgc-white i-icon i-plus mr-2"></i>
        New group call inquiry
      </button>
    </div>
  </div>
  <ng-container *ngIf="loading else showTeams">
    <ngx-spinner name="sp5" bdColor="rgba(50,50,50,0)" size="medium" color="#888" type="square-jelly-box"
                 [fullScreen]="false">
      <p class="text-dark loading-text mt-7" style="font-weight: 400;">Loading your teams...</p>
    </ngx-spinner>
  </ng-container>
  <ng-template #showTeams>
    <ng-container *ngIf="selectedTab.id == 'teams'">
      <div class="table-wrapper">
        <div class="my-4">
          <ng-container *ngIf="teams.length + invitedTeams.length; else emptyTeamList">
            <table class="table teams-table" *ngIf="teams.length">
              <thead>
              <th class="team-name">Team Name</th>
              <th class="team-members">Members</th>
              <th class="team-materials">Materials</th>
              <th class="team-owner">Owner</th>
              <th class="team-status">Your status</th>
              <th class="team-actions">Quick Actions</th>
              </thead>
              <tbody>
              <tr *ngFor="let team of teams">
                <td class="team-name">
                  <a class="item-detail-link f-6 font-weight-bold" [routerLink]="['/teams/' + team._id]">{{team.name}}</a>
                </td>
                <td class="team-members">
                  <div class="f-6 font-weight-bold">{{team.members.length}}</div>
                </td>
                <td class="team-materials">
                  <div class="f-6 font-weight-bold">{{team.videos.length + team.images.length + team.pdfs.length}}</div>
                </td>
                <td class="team-owner">
                  <div class="v-center">
                    <div class="owners v-center">
                      <ng-container *ngIf="team.owner">
                        <ng-container *ngIf="team.owner.length < 5; else overTemplate">
                          <div class="owner" *ngFor="let own of team.owner">
                            <ng-container *ngIf="own.picture_profile; else ownNamePlaceholder">
                              <img [src]="own.picture_profile" class="avatar" />
                            </ng-container>
                            <ng-template #ownNamePlaceholder>
                              <div class="name-avatar">{{own.user_name[0]}}</div>
                            </ng-template>
                          </div>
                        </ng-container>
                        <ng-template #overTemplate>
                          <div class="owner" *ngFor="let mIndex of [0,1,2,3]">
                            <ng-container *ngIf="team.owner[mIndex].picture_profile; else ownNamePlaceholder">
                              <img [src]="team.owner[mIndex].picture_profile" class="avatar" />
                            </ng-container>
                            <ng-template #ownNamePlaceholder>
                              <div class="name-avatar">{{team.owner[mIndex].username[0]}}</div>
                            </ng-template>
                          </div>
                          <div class="owner remain-number">
                            <div class="name-avatar">+{{team.owner.length - 4}}</div>
                          </div>
                        </ng-template>
                      </ng-container>
                    </div>
                    <div class="owner-names">
                      <ng-container *ngIf="team.owner">
                        <ng-container *ngIf="team.owner.length < 2; else overNameTemplate">
                          <div class="owner-main-name font-weight-bold">{{team.owner[0].user_name}}</div>
                        </ng-container>
                        <ng-template #overNameTemplate>
                          <div class="owner-main-name font-weight-bold">{{team.owner[0].user_name}}</div>
                          <div class="owner-remain-count f-2">(+ {{team.owner.length - 1}} Owners)</div>
                        </ng-template>
                      </ng-container>
                    </div>
                  </div>
                </td>
                <td class="team-status">
                  <div class="status font-weight-bold f-2 c-white" [class] = "status(team)">
                    {{status(team)}}
                  </div>
                </td>
                <td class="team-actions">
                  <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                    <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                      <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                    </a>
                    <div ngbDropdownMenu class="light">
                      <div class="actions ml-auto" *ngIf="team.own; else leaveActions">
                        <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="editTeam(team)">
                          <i class="i-icon i-edit bg-dark ml-1" aria-hidden="true"></i>
                          <span class="ml-3 f-4 font-weight-bold">Edit</span>
                        </button>
                        <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="deleteTeam(team)">
                          <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                          <span class="ml-3 f-4 font-weight-bold">Delete</span>
                        </button>
                      </div>
                      <ng-template #leaveActions>
                        <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="leaveTeam(team)">
                          <i class="i-icon i-block bg-dark ml-1" aria-hidden="true"></i>
                          <span class="ml-3 f-4 font-weight-bold">Block</span>
                        </button>
                      </ng-template>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
            <ng-container *ngIf="invitedTeams.length">
              <div classs="f-8 font-weight-bold" *ngIf="invitedTeams.length">
                YOU ARE INVITED FROM FOLLOWING TEAMS
              </div>
              <table class="table teams-table mt-2" *ngIf="invitedTeams.length">
                <thead>
                <th class="team-name">Team Name</th>
                <th class="team-members">Members</th>
                <th class="team-materials">Materials</th>
                <th class="team-owner">Owner</th>
                <th class="team-status">Your status</th>
                <th class="team-actions">Quick Actions</th>
                </thead>
                <tbody>
                <tr *ngFor="let team of invitedTeams">
                  <td class="team-name">
                    <a class="item-detail-link f-6 font-weight-bold" [routerLink]="['/teams/' + team._id]">{{team.name}}</a>
                  </td>
                  <td class="team-members">
                    <div class="f-6 font-weight-bold">{{team.members.length}}</div>
                  </td>
                  <td class="team-materials">
                    <div class="f-6 font-weight-bold">{{team.videos.length + team.images.length + team.pdfs.length}}</div>
                  </td>
                  <td class="team-owner">
                    <div class="v-center">
                      <div class="owners v-center">
                        <ng-container *ngIf="team.owner">
                          <ng-container *ngIf="team.owner.length < 5; else overTemplate">
                            <div class="owner" *ngFor="let own of team.owner">
                              <ng-container *ngIf="own.picture_profile; else ownNamePlaceholder">
                                <img [src]="own.picture_profile" class="avatar" />
                              </ng-container>
                              <ng-template #ownNamePlaceholder>
                                <div class="name-avatar">{{own.user_name[0]}}</div>
                              </ng-template>
                            </div>
                          </ng-container>
                          <ng-template #overTemplate>
                            <div class="owner" *ngFor="let mIndex of [0,1,2,3]">
                              <ng-container *ngIf="team.owner[mIndex].picture_profile; else ownNamePlaceholder">
                                <img [src]="team.owner[mIndex].picture_profile" class="avatar" />
                              </ng-container>
                              <ng-template #ownNamePlaceholder>
                                <div class="name-avatar">{{team.owner[mIndex].username[0]}}</div>
                              </ng-template>
                            </div>
                            <div class="owner remain-number">
                              <div class="name-avatar">+{{team.owner.length - 4}}</div>
                            </div>
                          </ng-template>
                        </ng-container>
                      </div>
                      <div class="owner-names">
                        <ng-container *ngIf="team.owner">
                          <ng-container *ngIf="team.owner.length < 2; else overNameTemplate">
                            <div class="owner-main-name font-weight-bold">{{team.owner[0].user_name}}</div>
                          </ng-container>
                          <ng-template #overNameTemplate>
                            <div class="owner-main-name font-weight-bold">{{team.owner[0].user_name}}</div>
                            <div class="owner-remain-count f-2">(+ {{team.owner.length - 1}} Owners)</div>
                          </ng-template>
                        </ng-container>
                      </div>
                    </div>
                  </td>
                  <td class="team-status">
                    <div class="status font-weight-bold f-2 c-white" [class] = "status(team)">
                      {{status(team)}}
                    </div>
                  </td>
                  <td class="actions">
                    <button class="v-center btn bgc-white c-dark f-4 mr-2" (click)="acceptInvitation(team)">
                      <i class="bgc-dark i-icon i-check mr-2"></i>
                      <span class="button-label">Accept</span>
                    </button>
                  </td>
                </tr>
                </tbody>
              </table>
            </ng-container>
          </ng-container>
          <ng-template #emptyTeamList>
            <div class="empty-team" *ngIf="!loading">
              <div class="placeholder">
                <div class="text-center">
                  <img class="icon" [src]="'../../../assets/img/team_icon.png'" />
                </div>
                <div class="text-center">
                  <div class="mb-3">There are no teams yet. If you want to share your some informations with your friends, please create team and invite them.</div>
                  <button class="btn btn-blue text-white f-6 mr-2" (click)="openForm()">Create Team</button>
                  <button class="btn btn-blue text-white f-6" (click)="joinForm()">Join Team</button>
                </div>
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="selectedTab.id == 'calls'">
      <div class="table-wrapper">
      </div>
    </ng-container>
  </ng-template>
  <ng-container *ngIf="selectedTab.id === 'calls'">
    <div class="group-call-container mt-2" *ngIf="!loading">
      <mat-accordion>
        <mat-expansion-panel [expanded]="inquiryExpanded" hideToggle>
          <mat-expansion-panel-header (click)="changeExpanded('inquiry')">
            <mat-panel-title>
              <div class="v-center border-0 py-2 c-dark expand">
                <i class="i-icon i-triangle-right bg-dark opacity-6 mr-3" aria-hidden="true" [class.expand]="inquiryExpanded"></i>
                <span class="f-6 font-weight-bold">New inquiries</span>
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="inquiry-call-container">
            <ng-container *ngIf="isInquiryLoading">
              <div class="px-3 pb-3">
                <div class="bg-white rounded">
                  <app-loading-overlay [type]="'table'"></app-loading-overlay>
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="!totalInquiries && !isInquiryLoading">
              <app-data-empty [type]="'inquiry'"></app-data-empty>
            </ng-container>
            <div class="d-flex justify-content-end align-items-center">
              <div class="f-5 font-weight-bold mb-2" *ngIf="inquiriesCount">{{inquiriesCount}} inquirie(s)</div>
              <div class="ml-3 pagination-wrapper" *ngIf="inquiriesCount">
                <pagination-controls (pageChange)="setPageInquiries($event)" id="new_inquiries" maxSize="5" previousLabel=""
                                     nextLabel=""></pagination-controls>
              </div>
            </div>
            <div class="bg-white rounded position-relative">
              <ng-container *ngIf="totalInquiries">
                <table class="table call-request-table" [class.loading]="isInquiryTableLoading">
                  <thead>
                  <tr>
                    <th class="subject">Subject & Description</th>
                    <th class="organizer">Organizer</th>
                    <th class="leader">Leader</th>
                    <th class="guests">Guests</th>
                    <th class="date-time">Date & Time Requested</th>
                    <th class="team-actions">Actions</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let inquiry of inquiriesData | paginate : { id: 'new_inquiries', itemsPerPage: 8, currentPage: currentInquiriesPage, totalItems: totalInquiries }">
                    <td class="subject" (click)="confirmRequest(inquiry)">
                      <div class="c-blue f-5 font-weight-bold">{{inquiry.subject}}</div>
                      <div class="c-dark opacity-6 f-2">{{inquiry.description | stripe | slice:0:40}}</div>
                    </td>
                    <td class="organizer" (click)="confirmRequest(inquiry)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="inquiry.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="inquiry.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{inquiry.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-2 font-weight-bold ml-2">{{inquiry.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="leader" (click)="confirmRequest(inquiry)">
                      <div class="v-center">
                        <ng-container *ngIf="inquiry.leader">
                          <div class="member-avatar">
                            <ng-container *ngIf="inquiry.leader.picture_profile; else leaderProfilePlaceholder">
                              <img [src]="inquiry.leader.picture_profile" class="avatar" />
                            </ng-container>
                            <ng-template #leaderProfilePlaceholder>
                              <div class="name-avatar">
                                {{inquiry.leader.user_name[0]}}
                              </div>
                            </ng-template>
                          </div>
                          <div class="f-2 font-weight-bold ml-2">{{inquiry.leader.user_name}}</div>
                        </ng-container>
                      </div>
                    </td>
                    <td class="guests">
                      <div class="f-4 font-weight-bold">{{inquiry.guests.length + inquiry.invites.length}}</div>
                    </td>
                    <td>
                      <div class="f-4">
                        {{inquiry.proposed_at[0] | date: 'MMM dd yyyy, h:mm a'}}
                      </div>
                      <div class="f-2 c-dark opacity-6" *ngIf="inquiry.proposed_at.length > 1">
                        +{{inquiry.proposed_at.length - 1}} call suggested
                      </div>
                    </td>
                    <td class="team-actions">
                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                        </a>
                        <div ngbDropdownMenu class="light">
                          <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="finishedInquiry(inquiry)">
                            <i class="i-icon i-check bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4">Set as Finished</span>
                          </button>
                          <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="cancelInquiry(inquiry)">
                            <i class="i-icon i-block bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4">Set as Canceled</span>
                          </button>
                          <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="deleteInquiry(inquiry)">
                            <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4">Delete</span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </tbody>
                </table>
              </ng-container>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-accordion>
        <mat-expansion-panel [expanded]="plannedExpanded" hideToggle>
          <mat-expansion-panel-header (click)="changeExpanded('planned')">
            <mat-panel-title>
              <div class="v-center border-0 py-2 c-dark expand">
                <i class="i-icon i-triangle-right bg-dark opacity-6 mr-3" aria-hidden="true" [class.expand]="plannedExpanded"></i>
                <span class="f-6 font-weight-bold">Scheduled Call</span>
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="inquiry-call-container">
            <ng-container *ngIf="isPlannedLoading">
              <div class="px-3 pb-3">
                <div class="bg-white rounded">
                  <app-loading-overlay [type]="'table'"></app-loading-overlay>
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="!totalPlanned && !isPlannedLoading">
              <app-data-empty [type]="'plan'"></app-data-empty>
            </ng-container>
            <div class="d-flex justify-content-end align-items-center">
              <div class="f-5 font-weight-bold mb-2" *ngIf="plannedCount">{{plannedCount}} scheduled calls(s)</div>
              <div class="ml-3 pagination-wrapper" *ngIf="plannedCount">
                <pagination-controls (pageChange)="setPageInquiries($event)" id="plannedTable" maxSize="5" previousLabel=""
                                     nextLabel=""></pagination-controls>
              </div>
            </div>
            <div class="bg-white rounded position-relative">
              <ng-container *ngIf="totalPlanned">
                <table class="table call-request-table" [class.loading]="isPlannedTableLoading">
                  <thead>
                  <tr>
                    <th class="subject">Subject & Description</th>
                    <th class="organizer">Organizer</th>
                    <th class="leader">Leader</th>
                    <th class="guests">Guests</th>
                    <th class="date-time">Date & Time Requested</th>
                    <th class="status">
                      <div class="v-center border-0 py-2 c-dark">
                        <span>Status</span>
                        <i class="i-icon i-question bg-dark ml-2" aria-hidden="true"></i>
                      </div>
                    </th>
                    <th class="team-actions">Actions</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let plan of plannedData | paginate : { id: 'plannedTable', itemsPerPage: 8, currentPage: currentPlannedPage, totalItems: totalPlanned }">
                    <td class="subject" (click)="confirmRequest(plan)">
                      <div class="c-blue f-5 font-weight-bold">{{plan.subject}}</div>
                      <div class="c-dark opacity-6 f-2">{{plan.description | stripe | slice:0:40}}</div>
                    </td>
                    <td class="organizer" (click)="confirmRequest(plan)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="plan.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="plan.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{plan.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-2 font-weight-bold ml-2">{{plan.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="leader" (click)="confirmRequest(plan)">
                      <div class="v-center">
                        <ng-container *ngIf="plan.leader">
                          <div class="member-avatar">
                            <ng-container *ngIf="plan.leader.picture_profile; else leaderProfilePlaceholder">
                              <img [src]="plan.leader.picture_profile" class="avatar" />
                            </ng-container>
                            <ng-template #leaderProfilePlaceholder>
                              <div class="name-avatar">
                                {{plan.leader.user_name[0]}}
                              </div>
                            </ng-template>
                          </div>
                          <div class="f-2 font-weight-bold ml-2">{{plan.leader.user_name}}</div>
                        </ng-container>
                      </div>
                    </td>
                    <td class="guests">
                      <div class="f-4 font-weight-bold">{{plan.guests.length + plan.invites.length}}</div>
                    </td>
                    <td>
                      <div class="f-4">
                        {{plan.proposed_at[0] | date: 'MMM dd yyyy, h:mm a'}}
                      </div>
                      <div class="f-2 opacity-6">
                        {{getDuration(plan.duration)}}
                      </div>
                    </td>
                    <td class="status">
                      <div class="v-center">
                        <div class="subscribe-button like v-center justify-content-center" (click)="finishedPlan(plan)">
                          <i class="i-icon i-like bgc-white" aria-hidden="true"></i>
                        </div>
                        <div class="subscribe-button unlike v-center justify-content-center ml-1" (click)="cancelPlan(plan)">
                          <i class="i-icon i-like bgc-white" aria-hidden="true"></i>
                        </div>
                      </div>
                    </td>
                    <td class="team-actions">
                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                        </a>
                        <div ngbDropdownMenu class="light">
                          <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="editGroupCall(plan)">
                            <i class="i-icon i-edit bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4">Edit group call</span>
                          </button>
                          <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="addToCalendar(plan)">
                            <i class="i-icon i-calendar bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4">Add to calendar</span>
                          </button>
                          <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="deletePlan(plan)">
                            <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4">Delete</span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </tbody>
                </table>
              </ng-container>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-accordion>
        <mat-expansion-panel [expanded]="finishedExpanded" hideToggle>
          <mat-expansion-panel-header (click)="changeExpanded('finished')">
            <mat-panel-title>
              <div class="v-center border-0 py-2 c-dark expand">
                <i class="i-icon i-triangle-right bg-dark opacity-6 mr-3" aria-hidden="true" [class.expand]="finishedExpanded"></i>
                <span class="f-6 font-weight-bold">Completed & Cancelled</span>
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="inquiry-call-container">
            <ng-container *ngIf="isFinishedLoading">
              <div class="px-3 pb-3">
                <div class="bg-white rounded">
                  <app-loading-overlay [type]="'table'"></app-loading-overlay>
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="!totalFinished && !isFinishedLoading">
              <app-data-empty [type]="'finish'"></app-data-empty>
            </ng-container>
            <div class="d-flex justify-content-end align-items-center">
              <div class="f-5 font-weight-bold mb-2" *ngIf="finishedCount">{{finishedCount}} completed & cancelled calls(s)</div>
              <div class="ml-3 pagination-wrapper" *ngIf="finishedCount">
                <pagination-controls (pageChange)="setPageInquiries($event)" id="finishedTable" maxSize="5" previousLabel=""
                                     nextLabel=""></pagination-controls>
              </div>
            </div>
            <div class="bg-white rounded position-relative">
              <ng-container *ngIf="totalFinished">
                <table class="table call-request-table" [class.loading]="isFinishedTableLoading">
                  <thead>
                  <tr>
                    <th class="subject">Subject & Description</th>
                    <th class="organizer">Organizer</th>
                    <th class="leader">Leader</th>
                    <th class="guests">Guests</th>
                    <th class="date-time">Date & Time Requested</th>
                    <th class="status">
                      <div class="v-center border-0 py-2 c-dark">
                        <span>Status</span>
                        <i class="i-icon i-question bg-dark ml-2" aria-hidden="true"></i>
                      </div>
                    </th>
                    <th class="team-actions">Actions</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let finished of finishedData | paginate : { id: 'finishedTable', itemsPerPage: 8, currentPage: currentFinishedPage, totalItems: totalFinished }">
                    <td class="subject" (click)="confirmRequest(finished)">
                      <div class="c-blue f-5 font-weight-bold">{{finished.subject}}</div>
                      <div class="c-dark opacity-6 f-2">{{finished.description | stripe | slice:0:40}}</div>
                    </td>
                    <td class="organizer" (click)="confirmRequest(finished)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="finished.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="finished.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{finished.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-2 font-weight-bold ml-2">{{finished.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="leader" (click)="confirmRequest(finished)">
                      <div class="v-center">
                        <ng-container *ngIf="finished.leader">
                          <div class="member-avatar">
                            <ng-container *ngIf="finished.leader.picture_profile; else leaderProfilePlaceholder">
                              <img [src]="finished.leader.picture_profile" class="avatar" />
                            </ng-container>
                            <ng-template #leaderProfilePlaceholder>
                              <div class="name-avatar">
                                {{finished.leader.user_name[0]}}
                              </div>
                            </ng-template>
                          </div>
                          <div class="f-2 font-weight-bold ml-2">{{finished.leader.user_name}}</div>
                        </ng-container>
                      </div>
                    </td>
                    <td class="guests">
                      <div class="f-4 font-weight-bold">{{finished.guests.length + finished.invites.length}}</div>
                    </td>
                    <td>
                      <div class="f-4">
                        {{finished.proposed_at[0] | date: 'MMM dd yyyy, h:mm a'}}
                      </div>
                      <div class="f-2 opacity-6">
                        {{getDuration(finished.duration)}}
                      </div>
                    </td>
                    <td class="status">
                      <div class="status" (click)="confirmRequest(finished)">
                        <div [className]="finished.status">{{finished.status}}</div>
                      </div>
                    </td>
                    <td class="team-actions">
                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                        </a>
                        <div ngbDropdownMenu class="light">
                          <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="deleteFinished(finished)">
                            <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4">Delete</span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </tbody>
                </table>
              </ng-container>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </ng-container>
</div>

