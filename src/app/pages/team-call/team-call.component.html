<div class="v-center justify-content-end mt-xl-0 mt-lg-0 mt-md-0 mt-sm-3 mt-3">
  <h5 class="font-weight-bold mb-0">Group calls</h5>
  <button class="v-center btn btn-primary shadow py-2 ml-auto" (click)="joinCallRequest()">
    <i class="i-icon i-plus bg-white d-block sm mr-2"></i>
    <span class="fw-600 f-3">New group call inquiry</span>
  </button>
</div>
<div class="group-call-container mt-4">
  <div class="sub-sidebar-mobile mb-3">
    <div ngbDropdown class="sidebar-menu p-2">
      <div ngbDropdownToggle class="v-center">
        <span class="f-3 menu-label font-weight-bold c-blue">{{selectedTab.label | translate}}</span>
        <span class="ml-auto f-3">3</span>
      </div>
      <div ngbDropdownMenu class="light">
        <div *ngFor="let tab of TABS" class="dropdown-item">
          <a class="d-flex nav-link c-dark c-pointer px-0" (click)="changeTab(tab)">
            <span class="f-3 menu-label font-weight-bold">{{tab.label | translate}}</span>
            <span class="f-3 ml-auto mr-3">{{total[tab.id]}}</span>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex">
    <div class="sub-sidebar desktop">
      <ul class="m-0 p-0">
        <ng-container *ngFor="let tab of TABS">
          <li [class.selected]="selectedTab.id === tab.id" class="v-center mb-3 c-pointer" (click)="changeTab(tab)">
            <span class="font-weight-bold f-3 c-dark">{{tab.label}}</span>
            <span class="f-3 ml-auto">{{total[tab.id]}}</span>
          </li>
        </ng-container>
      </ul>
    </div>
    <div class="sub-container">
      <ng-container *ngIf="total[selectedTab.id]; else emptyTable">
        <div class="updating-status"
          *ngIf="loading[selectedTab.id]; else listTemplate">
          LOADING
        </div>
        <ng-template #listTemplate>
          <table class="table">
            <thead>
              <ng-container [ngSwitch]="selectedTab.id">
                <tr *ngSwitchCase="'inquiry'">
                  <th class="subject">subject</th>
                  <th class="organizer">organizer</th>
                  <th class="date-time">proposed times</th>
                  <th class="call-status">status</th>
                  <th class="team-actions"></th>
                </tr>
                <tr *ngSwitchCase="'sent'">
                  <th class="subject">subject</th>
                  <th class="organizer">leader</th>
                  <th class="date-time">proposed times</th>
                  <th class="call-status">status</th>
                  <th class="team-actions"></th>
                </tr>
                <tr *ngSwitchCase="'scheduled'">
                  <th class="subject">subject</th>
                  <th class="organizer">organizer</th>
                  <th class="leader">leader</th>
                  <th class="date-time">date & time</th>
                  <th class="call-status">status</th>
                  <th class="team-actions"></th>
                </tr>
                <tr *ngSwitchCase="'completed'">
                  <th class="subject">subject</th>
                  <th class="organizer">organizer</th>
                  <th class="leader">leader</th>
                  <th class="date-time">date & time</th>
                  <th class="call-status">status</th>
                  <th class="team-actions"></th>
                </tr>
                <tr *ngSwitchCase="'canceled'">
                  <th class="subject">subject</th>
                  <th class="organizer">organizer</th>
                  <th class="leader">leader</th>
                  <th class="date-time">date & time</th>
                  <th class="call-status">status</th>
                  <th class="team-actions"></th>
                </tr>
                <tr *ngSwitchCase="'denied'">
                  <th class="subject">subject</th>
                  <th class="organizer">organizer</th>
                  <th class="leader">leader</th>
                  <th class="date-time">date & time</th>
                  <th class="call-status">status</th>
                  <th class="team-actions"></th>
                </tr>
              </ng-container>
            </thead>
            <tbody>
              <tr *ngFor="let call of pageData[selectedTab.id] | paginate: {id: selectedTab.id + 'CallPages', itemsPerPage: 8, currentPage: page[selectedTab.id], totalItems: total[selectedTab.id]}">
                <ng-container [ngSwitch]="selectedTab.id">
                  <ng-container *ngSwitchCase="'inquiry'">
                    <td class="subject" (click)="openCall(call)">
                      <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                      <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                    </td>
                    <td class="organizer" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="date-time" (click)="openCall(call)">
                      <div class="" *ngFor="let time of (call.proposed_at | slice:0:2)">
                        {{time | date: 'MMM dd yyyy, hh:mm a'}}
                      </div>
                      <div class="op-75" *ngIf="call.proposed_at.length > 2">
                        + {{call.proposed_at.length - 2}} more options
                      </div>
                    </td>
                    <td class="call-status">
                      Needs review
                    </td>
                    <td class="team-actions">
                      <div class="v-center">
                        <button type="button" class="btn btn-white-blue ml-2 c-blue f-3 py-2 font-weight-bold ml-auto" (click)="openCall(call)">Review</button>
                        <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                          <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                            <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                          </a>
                          <div ngbDropdownMenu class="light py-1">
                            <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="addToCalendar(call)">
                              <i class="i-icon i-calendar bg-dark sm ml-1" aria-hidden="true"></i>
                              <span class="ml-3 f-3 font-weight-bold">Add to calendar</span>
                            </button>
                            <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="decline(call)">
                              <i class="i-icon i-trash bg-dark ml-1 sm" aria-hidden="true"></i>
                              <span class="ml-3 f-3 font-weight-bold">Decline</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </td>
                  </ng-container>
                  <ng-container *ngSwitchCase="'sent'">
                    <td class="subject" (click)="openCall(call)">
                      <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                      <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                    </td>
                    <td class="organizer" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.leader.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.leader.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                      </div>
                    </td>
                    <td class="date-time" (click)="openCall(call)">
                      <div class="" *ngFor="let time of (call.proposed_at | slice:0:2)">
                        {{time | date: 'MMM dd yyyy, hh:mm a'}}
                      </div>
                      <div class="op-75" *ngIf="call.proposed_at.length > 2">
                        + {{call.proposed_at.length - 2}} more options
                      </div>
                    </td>
                    <td class="call-status" (click)="openCall(call)">
                      Pending review
                    </td>
                    <td class="team-actions">
                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                        </a>
                        <div ngbDropdownMenu class="light py-1">
                          <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="edit(call)">
                            <i class="i-icon i-edit bg-dark sm ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-3 font-weight-bold">Edit</span>
                          </button>
                          <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="delete(call)">
                            <i class="i-icon i-trash sm bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-3 font-weight-bold">Delete</span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </ng-container>
                  <ng-container *ngSwitchCase="'scheduled'">
                    <td class="subject" (click)="openCall(call)">
                      <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                      <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                    </td>
                    <td class="organizer" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="leader" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.leader.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.leader.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                      </div>
                    </td>
                    <td class="date-time" (click)="openCall(call)">
                      <div class="">
                        {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                      </div>
                    </td>
                    <td class="call-status" (click)="openCall(call)">
                      Scheduled
                    </td>
                    <td class="team-actions">
                      <div class="v-center">
                        <button type="button" class="btn bgc-green text-white ml-auto f-3 py-2 font-weight-bold" (click)="openCall(call)">Complete</button>
                        <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                          <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                            <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                          </a>
                          <div ngbDropdownMenu class="light py-1">
                            <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="complete(call)">
                              <i class="i-icon i-check bg-dark sm ml-1" aria-hidden="true"></i>
                              <span class="ml-3 f-3 font-weight-bold">Complete</span>
                            </button>
                            <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="cancel(call)">
                              <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                              <span class="ml-3 f-3 font-weight-bold">Cancel</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </td>
                  </ng-container>
                  <ng-container *ngSwitchCase="'completed'">
                    <td class="subject" (click)="openCall(call)">
                      <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                      <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                    </td>
                    <td class="organizer" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="leader" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.leader.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.leader.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                      </div>
                    </td>
                    <td class="date-time" (click)="openCall(call)">
                      {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                    </td>
                    <td class="call-status" (click)="openCall(call)">
                      Completed
                    </td>
                    <td class="team-actions">
                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                        </a>
                        <div ngbDropdownMenu class="light py-1">
                          <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="delete(call)">
                            <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4 font-weight-bold">Delete</span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </ng-container>
                  <ng-container *ngSwitchCase="'canceled'">
                    <td class="subject" (click)="openCall(call)">
                      <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                      <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                    </td>
                    <td class="organizer" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="leader" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.leader.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.leader.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                      </div>
                    </td>
                    <td class="date-time" (click)="openCall(call)">
                      {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                    </td>
                    <td class="call-status" (click)="openCall(call)">
                      Canceled
                    </td>
                    <td class="team-actions">
                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                        </a>
                        <div ngbDropdownMenu class="light py-1">
                          <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="delete(call)">
                            <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4 font-weight-bold">Delete</span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </ng-container>
                  <ng-container *ngSwitchCase="'denied'">
                    <td class="subject" (click)="openCall(call)">
                      <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                      <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                    </td>
                    <td class="organizer" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.user.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.user.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                      </div>
                    </td>
                    <td class="leader" (click)="openCall(call)">
                      <div class="v-center">
                        <div class="member-avatar">
                          <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                            <img [src]="call.leader.picture_profile" class="avatar" />
                          </ng-container>
                          <ng-template #userProfilePlaceholder>
                            <div class="name-avatar">
                              {{call.leader.user_name[0]}}
                            </div>
                          </ng-template>
                        </div>
                        <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                      </div>
                    </td>
                    <td class="date-time" (click)="openCall(call)">
                      {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                    </td>
                    <td class="call-status" (click)="openCall(call)">
                      Declined
                    </td>
                    <td class="team-actions">
                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                        </a>
                        <div ngbDropdownMenu class="light py-1">
                          <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="delete(call)">
                            <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                            <span class="ml-3 f-4 font-weight-bold">Delete</span>
                          </button>
                        </div>
                      </div>
                    </td>
                  </ng-container>
                </ng-container>
              </tr>
            </tbody>
          </table>
        </ng-template>
        <div class="pagination-wrapper m-auto">
          <pagination-controls (pageChange)="changePage($event)"
            (pageBoundsCorrection)="pageChanged($event)"
            id="{{selectedTab.id}}CallPages"
            maxSize="5"
            previousLabel=""
            nextLabel="">
          </pagination-controls>
        </div>
      </ng-container>
      <ng-template #emptyTable>
        <div class="list-loading text-center"
          *ngIf="loading[selectedTab.id]; else emptyList">
          <div class="loader mt-5 lg"></div>
          <ng-container [ngSwitch]="selectedTab.id">
            <h4 class="fw-600 mt-2" *ngSwitchCase="'inquiry'">Loading call requests from others...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'sent'">Loading my call requests...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'scheduled'">Loading scheduled calls...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'completed'">Loading completed calls...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'canceled'">Loading canceled calls...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'denied'">Loading declined calls...</h4>
          </ng-container>
        </div>
        <ng-template #emptyList>
          <div class="empty-list py-5">
            <div class="object-icon v-center">
              <i class="i-icon i-lunch d-block bgc-dark"></i>
            </div>
            <ng-container [ngSwitch]="selectedTab.id">
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'inquiry'">
                There is no call request from others</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'sent'">
                You did not make any call requests.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'scheduled'">
                There is no scheduled calls.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'completed'">
                There is no completed calls yet.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'canceled'">
                There is no canceled calls.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'denied'">
                There is no declined calls.</h4>
            </ng-container>
          </div>
        </ng-template>
      </ng-template>
    </div>
  </div>
  <!-- <mat-accordion>
    <mat-expansion-panel [expanded]="inquiryExpanded" hideToggle>
      <mat-expansion-panel-header (click)="changeExpanded('inquiry')">
        <mat-panel-title>
          <div class="v-center border-0 py-2 c-dark expand">
            <i class="i-icon i-triangle-right bg-dark opacity-6 mr-3" aria-hidden="true" [class.expand]="inquiryExpanded"></i>
            <span class="f-6 font-weight-bold">New inquiries</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="inquiry-call-container">
        <ng-container *ngIf="isInquiryLoading">
          <div class="px-3 pb-3">
            <div class="list-loading text-center">
              <div class="loader"></div>
              <h5 class="fw-600 mt-2">Loading new inquiries for group calls...</h5>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="!totalInquiries && !isInquiryLoading">
          <div class="empty-list">
            <div class="object-icon v-center">
              <i class="i-icon i-group-call d-block bgc-dark"></i>
            </div>
            <h5 class="font-weight-bold mt-4 mb-3">
              There is no new inquiries.
            </h5>
            <p class="mb-4">Please create new inquiry.</p>
          </div>
        </ng-container>
        <div class="bg-white rounded position-relative">
          <ng-container *ngIf="totalInquiries">
            <table class="table call-request-table" [class.loading]="isInquiryTableLoading">
              <thead>
              <tr>
                <th class="subject">Subject</th>
                <th class="organizer">Organizer</th>
                <th class="leader">Leader</th>
                <th class="guests">Guests</th>
                <th class="date-time">Date & Time Requested</th>
                <th class="team-actions">Actions</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let inquiry of inquiriesData | paginate : { id: 'new_inquiries', itemsPerPage: 8, currentPage: currentInquiriesPage, totalItems: totalInquiries }">
                <td class="subject" (click)="confirmRequest(inquiry)">
                  <div class="c-blue f-3 font-weight-bold">{{inquiry.subject}}</div>
                  <div class="c-dark opacity-6 f-3">{{inquiry.description || '' | stripTags | shorten: 40: '...'}}</div>
                </td>
                <td class="organizer" (click)="confirmRequest(inquiry)">
                  <div class="v-center">
                    <div class="member-avatar">
                      <ng-container *ngIf="inquiry.user.picture_profile; else userProfilePlaceholder">
                        <img [src]="inquiry.user.picture_profile" class="avatar" />
                      </ng-container>
                      <ng-template #userProfilePlaceholder>
                        <div class="name-avatar">
                          {{inquiry.user.user_name[0]}}
                        </div>
                      </ng-template>
                    </div>
                    <div class="f-3 c-dark ml-2">{{inquiry.user.user_name}}</div>
                  </div>
                </td>
                <td class="leader" (click)="confirmRequest(inquiry)">
                  <div class="v-center">
                    <ng-container *ngIf="inquiry.leader">
                      <div class="member-avatar">
                        <ng-container *ngIf="inquiry.leader.picture_profile; else leaderProfilePlaceholder">
                          <img [src]="inquiry.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #leaderProfilePlaceholder>
                          <div class="name-avatar">
                            {{inquiry.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 c-dark ml-2">{{inquiry.leader.user_name}}</div>
                    </ng-container>
                  </div>
                </td>
                <td class="guests">
                  <div class="f-3 c-dark">{{inquiry.guests.length + inquiry.invites.length}}</div>
                </td>
                <td>
                  <div class="f-3 c-dark">
                    {{inquiry.proposed_at[0] | date: 'MMM dd yyyy, h:mm a'}}
                  </div>
                  <div class="f-2 c-dark opacity-6" *ngIf="inquiry.proposed_at.length > 1">
                    +{{inquiry.proposed_at.length - 1}} call suggested
                  </div>
                </td>
                <td class="team-actions">
                  <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                    <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                      <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                    </a>
                    <div ngbDropdownMenu class="light">
                      <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="finishedInquiry(inquiry)">
                        <i class="i-icon i-check bg-dark ml-1" aria-hidden="true"></i>
                        <span class="ml-3 f-3 font-weight-bold">Set as Finished</span>
                      </button>
                      <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="cancelInquiry(inquiry)">
                        <i class="i-icon i-block bg-dark ml-1" aria-hidden="true"></i>
                        <span class="ml-3 f-3 font-weight-bold">Set as Canceled</span>
                      </button>
                      <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="deleteInquiry(inquiry)">
                        <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                        <span class="ml-3 f-3 font-weight-bold">Delete</span>
                      </button>
                    </div>
                  </div>
                </td>
              </tbody>
            </table>
          </ng-container>
        </div>
        <div class="v-center justify-content-center">
          <div class="ml-3 pagination-wrapper" *ngIf="inquiriesCount">
            <pagination-controls (pageChange)="setPageInquiries($event)" id="new_inquiries" maxSize="5" previousLabel=""
                                 nextLabel=""></pagination-controls>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <mat-accordion>
    <mat-expansion-panel [expanded]="plannedExpanded" hideToggle>
      <mat-expansion-panel-header (click)="changeExpanded('planned')">
        <mat-panel-title>
          <div class="v-center border-0 py-2 c-dark expand">
            <i class="i-icon i-triangle-right bg-dark opacity-6 mr-3" aria-hidden="true" [class.expand]="plannedExpanded"></i>
            <span class="f-6 font-weight-bold">Scheduled Call</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="inquiry-call-container">
        <ng-container *ngIf="isPlannedLoading">
          <div class="px-3 pb-3">
            <div class="list-loading text-center">
              <div class="loader"></div>
              <h5 class="fw-600 mt-2">Loading scheduled calls for group calls...</h5>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="!totalPlanned && !isPlannedLoading">
          <div class="empty-list">
            <div class="object-icon v-center">
              <i class="i-icon i-group-call d-block bgc-dark"></i>
            </div>
            <h5 class="font-weight-bold mt-4 mb-3">
              There is no scheduled calls.
            </h5>
            <p class="mb-4">Please schedule calls in new inquiries.</p>
          </div>
        </ng-container>
        <div class="bg-white rounded position-relative">
          <ng-container *ngIf="totalPlanned">
            <table class="table call-request-table scheduled-call-table" [class.loading]="isPlannedTableLoading">
              <thead>
              <tr>
                <th class="subject">Subject & Description</th>
                <th class="organizer">Organizer</th>
                <th class="leader">Leader</th>
                <th class="guests">Guests</th>
                <th class="date-time">Date & Time Requested</th>
                <th class="status">
                  <div class="v-center border-0 py-2 c-dark">
                    <span>Status</span>
                    <i class="i-icon i-question bg-dark ml-2" aria-hidden="true"></i>
                  </div>
                </th>
                <th class="team-actions">Actions</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let plan of plannedData | paginate : { id: 'plannedTable', itemsPerPage: 8, currentPage: currentPlannedPage, totalItems: totalPlanned }">
                <td class="subject" (click)="scheduleCall(plan)">
                  <div class="c-blue f-3 font-weight-bold">{{plan.subject}}</div>
                  <div class="c-dark opacity-6 f-3">{{plan.description || '' | stripTags | shorten: 40: '...'}}</div>
                </td>
                <td class="organizer" (click)="scheduleCall(plan)">
                  <div class="v-center">
                    <div class="member-avatar">
                      <ng-container *ngIf="plan.user.picture_profile; else userProfilePlaceholder">
                        <img [src]="plan.user.picture_profile" class="avatar" />
                      </ng-container>
                      <ng-template #userProfilePlaceholder>
                        <div class="name-avatar">
                          {{plan.user.user_name[0]}}
                        </div>
                      </ng-template>
                    </div>
                    <div class="f-3 ml-2">{{plan.user.user_name}}</div>
                  </div>
                </td>
                <td class="leader" (click)="scheduleCall(plan)">
                  <div class="v-center">
                    <ng-container *ngIf="plan.leader">
                      <div class="member-avatar">
                        <ng-container *ngIf="plan.leader.picture_profile; else leaderProfilePlaceholder">
                          <img [src]="plan.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #leaderProfilePlaceholder>
                          <div class="name-avatar">
                            {{plan.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 c-dark ml-2">{{plan.leader.user_name}}</div>
                    </ng-container>
                  </div>
                </td>
                <td class="guests">
                  <div class="f-3 c-dark">{{plan.guests.length + plan.invites.length}}</div>
                </td>
                <td>
                  <div class="f-3 c-dark">
                    {{plan.proposed_at[0] | date: 'MMM dd yyyy, h:mm a'}}
                  </div>
                  <div class="f-3 opacity-6">
                    {{getDuration(plan.duration)}}
                  </div>
                </td>
                <td class="status">
                  <div class="v-center">
                    <div class="subscribe-button like v-center justify-content-center" (click)="finishedPlan(plan)">
                      <i class="i-icon i-like bgc-white" aria-hidden="true"></i>
                    </div>
                    <div class="subscribe-button unlike v-center justify-content-center ml-1" (click)="cancelPlan(plan)">
                      <i class="i-icon i-like bgc-white" aria-hidden="true"></i>
                    </div>
                  </div>
                </td>
                <td class="team-actions">
                  <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                    <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                      <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                    </a>
                    <div ngbDropdownMenu class="light">
                      <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="scheduleCall(plan)">
                        <i class="i-icon i-edit bg-dark ml-1" aria-hidden="true"></i>
                        <span class="ml-3 f-3 font-weight-bold">Edit group call</span>
                      </button>
                      <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="addToCalendar(plan)">
                        <i class="i-icon i-calendar bg-dark ml-1" aria-hidden="true"></i>
                        <span class="ml-3 f-3 font-weight-bold">Add to calendar</span>
                      </button>
                      <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="deletePlan(plan)">
                        <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                        <span class="ml-3 f-3 font-weight-bold">Delete</span>
                      </button>
                    </div>
                  </div>
                </td>
              </tbody>
            </table>
          </ng-container>
        </div>
        <div class="v-center justify-content-center">
          <div class="ml-3 pagination-wrapper" *ngIf="plannedCount">
            <pagination-controls (pageChange)="setPagePlanned($event)" id="plannedTable" maxSize="5" previousLabel=""
                                 nextLabel=""></pagination-controls>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <mat-accordion>
    <mat-expansion-panel [expanded]="finishedExpanded" hideToggle>
      <mat-expansion-panel-header (click)="changeExpanded('finished')">
        <mat-panel-title>
          <div class="v-center border-0 py-2 c-dark expand">
            <i class="i-icon i-triangle-right bg-dark opacity-6 mr-3" aria-hidden="true" [class.expand]="finishedExpanded"></i>
            <span class="f-6 font-weight-bold">Completed & Cancelled</span>
          </div>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="inquiry-call-container">
        <ng-container *ngIf="isFinishedLoading">
          <div class="px-3 pb-3">
            <div class="list-loading text-center">
              <div class="loader"></div>
              <h5 class="fw-600 mt-2">Loading completed & cancelled calls for group calls...</h5>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="!totalFinished && !isFinishedLoading">
          <div class="empty-list">
            <div class="object-icon v-center">
              <i class="i-icon i-group-call d-block bgc-dark"></i>
            </div>
            <h5 class="font-weight-bold mt-4 mb-3">
              There is no completed & cancelled calls.
            </h5>
            <p class="mb-4">Please complete and cancel calls in new inquiries or scheduled calls.</p>
          </div>
        </ng-container>
        <div class="bg-white rounded position-relative">
          <ng-container *ngIf="totalFinished">
            <table class="table call-request-table completed-call-table" [class.loading]="isFinishedTableLoading">
              <thead>
              <tr>
                <th class="subject">Subject & Description</th>
                <th class="organizer">Organizer</th>
                <th class="leader">Leader</th>
                <th class="guests">Guests</th>
                <th class="date-time">Date & Time Requested</th>
                <th class="status">
                  <div class="v-center border-0 py-2 c-dark">
                    <span>Status</span>
                    <i class="i-icon i-question bg-dark ml-2" aria-hidden="true"></i>
                  </div>
                </th>
                <th class="team-actions">Actions</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let finished of finishedData | paginate : { id: 'finishedTable', itemsPerPage: 8, currentPage: currentFinishedPage, totalItems: totalFinished }">
                <td class="subject" (click)="scheduleCall(finished)">
                  <div class="c-blue f-3 font-weight-bold">{{finished.subject}}</div>
                  <div class="c-dark opacity-6 f-3">{{finished.description || '' | stripTags | shorten: 40: '...'}}</div>
                </td>
                <td class="organizer" (click)="scheduleCall(finished)">
                  <div class="v-center">
                    <div class="member-avatar">
                      <ng-container *ngIf="finished.user.picture_profile; else userProfilePlaceholder">
                        <img [src]="finished.user.picture_profile" class="avatar" />
                      </ng-container>
                      <ng-template #userProfilePlaceholder>
                        <div class="name-avatar">
                          {{finished.user.user_name[0]}}
                        </div>
                      </ng-template>
                    </div>
                    <div class="f-3 c-dark ml-2">{{finished.user.user_name}}</div>
                  </div>
                </td>
                <td class="leader" (click)="scheduleCall(finished)">
                  <div class="v-center">
                    <ng-container *ngIf="finished.leader">
                      <div class="member-avatar">
                        <ng-container *ngIf="finished.leader.picture_profile; else leaderProfilePlaceholder">
                          <img [src]="finished.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #leaderProfilePlaceholder>
                          <div class="name-avatar">
                            {{finished.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 c-dark ml-2">{{finished.leader.user_name}}</div>
                    </ng-container>
                  </div>
                </td>
                <td class="guests">
                  <div class="f-3 c-dark">{{finished.guests.length + finished.invites.length}}</div>
                </td>
                <td>
                  <div class="f-3 c-dark">
                    {{finished.proposed_at[0] | date: 'MMM dd yyyy, h:mm a'}}
                  </div>
                  <div class="f-3 opacity-6">
                    {{getDuration(finished.duration)}}
                  </div>
                </td>
                <td class="status">
                  <div class="status">
                    <div [className]="finished.status"><span class="text-uppercase">{{finished.status}}</span></div>
                  </div>
                </td>
                <td class="team-actions">
                  <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded">
                    <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>
                      <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>
                    </a>
                    <div ngbDropdownMenu class="light">
                      <button class="v-center border-0 py-2 c-dark dropdown-item" (click)="deleteFinished(finished)">
                        <i class="i-icon i-trash bg-dark ml-1" aria-hidden="true"></i>
                        <span class="ml-3 f-4 font-weight-bold">Delete</span>
                      </button>
                    </div>
                  </div>
                </td>
              </tbody>
            </table>
          </ng-container>
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <div class="ml-3 pagination-wrapper" *ngIf="finishedCount">
            <pagination-controls (pageChange)="setPageFinished($event)" id="finishedTable" maxSize="5" previousLabel=""
                                 nextLabel=""></pagination-controls>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion> -->
</div>
