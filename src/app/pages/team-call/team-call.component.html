<div class="v-center justify-content-end mt-xl-0 mt-lg-0 mt-md-0 mt-sm-3 mt-3 sub-page-header position-relative">
  <div class="v-center">
    <h5 class="sub-sidebar font-weight-bold mb-0">Group calls</h5>
    <div class="form-group mb-0 search-form">
      <div class="input-group-prepend">
        <i class="i-icon i-search d-block bgc-dark"></i>
      </div>
      <input type="text" class="form-control" placeholder="Search" aria-label="search" aria-describedby="search-addon" [(ngModel)]="searchStr" (ngModelChange)="changeSearchStr()" [class.disabled]="loading[selectedTab.id]">
      <ng-container *ngIf="searchStr">
        <div class="cancel-action c-pointer" (click)="clearSearchStr()">
          <i class="i-icon i-close d-block bgc-dark"></i>
        </div>
      </ng-container>
    </div>
  </div>
  <button class="btn btn-primary shadow ml-auto" (click)="joinCallRequest()">
    <span class="fw-600 f-3">New group call inquiry</span>
  </button>
</div>
<div class="group-call-container mt-3">
  <div class="sub-sidebar-mobile mb-3">
    <div ngbDropdown class="sidebar-menu p-2">
      <div ngbDropdownToggle class="v-center">
        <span class="f-3 menu-label font-weight-bold c-blue">{{selectedTab.label | translate}}</span>
        <span class="ml-auto f-3">3</span>
      </div>
      <div ngbDropdownMenu class="light">
        <div *ngFor="let tab of TABS" class="dropdown-item">
          <a class="d-flex nav-link c-dark c-pointer px-0" (click)="changeTab(tab)">
            <span class="f-3 menu-label font-weight-bold">{{tab.label | translate}}</span>
            <span class="f-3 ml-auto mr-3">{{total[tab.id]}}</span>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex">
    <div class="sub-sidebar desktop mt-2">
      <ul class="m-0 p-0 pt-1">
        <ng-container *ngFor="let tab of TABS">
          <li [class.selected]="selectedTab.id === tab.id" class="v-center mb-3 c-pointer" (click)="changeTab(tab)">
            <span class="font-weight-bold f-3 c-dark">{{tab.label}}</span>
            <span class="f-3 ml-auto">{{total[tab.id]}}</span>
          </li>
        </ng-container>
      </ul>
    </div>
    <div class="sub-container position-relative">
      <ng-container *ngIf="total[selectedTab.id]; else emptyTable">
        <div class="updating-status"
          *ngIf="loading[selectedTab.id]">
          LOADING
        </div>
<!--          <ng-container [ngSwitch]="selectedTab.id">-->
<!--            <ng-container *ngSwitchCase="'inquiry'">-->
<!--              <table-->
<!--                mat-table-->
<!--                class="table call-table page-table" multiTemplateDataRows-->
<!--                [dataSource]="pageData[selectedTab.id] | paginate: {id: selectedTab.id + 'CallPages', itemsPerPage: pageSize.id, currentPage: page[selectedTab.id], totalItems: total[selectedTab.id]}">-->
<!--                <ng-container matColumnDef="subject">-->
<!--                  <th mat-header-cell *matHeaderCellDef class="subject">Subject</th>-->
<!--                  <td mat-cell *matCellDef="let inquiry" class="subject" (click)="openCall(inquiry)">-->
<!--                    <div class="c-blue f-3 font-weight-bold">{{inquiry.subject}}</div>-->
<!--                    <div class="c-dark opacity-6 f-3">{{inquiry.description || '' | stripTags | shorten: 40: '...'}}</div>-->
<!--                  </td>-->
<!--                </ng-container>-->
<!--                <ng-container matColumnDef="organizer">-->
<!--                  <th mat-header-cell *matHeaderCellDef class="organizer">organizer</th>-->
<!--                  <td mat-cell *matCellDef="let inquiry" class="organizer" (click)="openCall(inquiry)">-->
<!--                    <div class="v-center">-->
<!--                      <div class="member-avatar">-->
<!--                        <ng-container *ngIf="inquiry.user.picture_profile; else userProfilePlaceholder">-->
<!--                          <img [src]="inquiry.user.picture_profile" class="avatar" />-->
<!--                        </ng-container>-->
<!--                        <ng-template #userProfilePlaceholder>-->
<!--                          <div class="name-avatar">-->
<!--                            {{inquiry.user.user_name[0]}}-->
<!--                          </div>-->
<!--                        </ng-template>-->
<!--                      </div>-->
<!--                      <div class="f-3 ml-2 member-name">{{inquiry.user.user_name}}</div>-->
<!--                    </div>-->
<!--                  </td>-->
<!--                </ng-container>-->
<!--                <ng-container matColumnDef="date-time">-->
<!--                  <th mat-header-cell *matHeaderCellDef class="date-time">proposed times</th>-->
<!--                  <td mat-cell *matCellDef="let inquiry" class="date-time" (click)="openCall(inquiry)">-->
<!--                    <div class="" *ngFor="let time of (inquiry.proposed_at | slice:0:2)">-->
<!--                      {{time | date: 'MMM dd yyyy, hh:mm a'}}-->
<!--                    </div>-->
<!--                    <div class="op-75" *ngIf="inquiry.proposed_at.length > 2">-->
<!--                      + {{inquiry.proposed_at.length - 2}} more options-->
<!--                    </div>-->
<!--                  </td>-->
<!--                </ng-container>-->
<!--                <ng-container matColumnDef="call-status">-->
<!--                  <th mat-header-cell *matHeaderCellDef class="call-status">status</th>-->
<!--                  <td mat-cell *matCellDef="let inquiry" class="call-status">-->
<!--                    Needs review-->
<!--                  </td>-->
<!--                </ng-container>-->
<!--                <ng-container matColumnDef="team-actions">-->
<!--                  <th mat-header-cell *matHeaderCellDef class="team-actions"></th>-->
<!--                  <td mat-cell *matCellDef="let inquiry" class="team-actions">-->
<!--                    <div class="v-center">-->
<!--                      <button type="button" class="btn btn-white-blue ml-2 c-blue f-3 py-2 font-weight-bold ml-auto" (click)="openCall(inquiry)">Review</button>-->
<!--                      <div ngbDropdown class="d-flex justify-content-end button-more p-2 rounded bottom-right">-->
<!--                        <a class="v-center justify-content-end c-pointer" ngbDropdownToggle>-->
<!--                          <i class="i-icon i-menu-more bg-dark" aria-hidden="true"></i>-->
<!--                        </a>-->
<!--                        <div ngbDropdownMenu class="light py-1">-->
<!--                          <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="addToCalendar(inquiry)">-->
<!--                            <i class="i-icon i-calendar bg-dark sm ml-1" aria-hidden="true"></i>-->
<!--                            <span class="ml-3 f-3 font-weight-bold">Add to calendar</span>-->
<!--                          </button>-->
<!--                          <button class="v-center border-0 py-1 c-dark dropdown-item" (click)="decline(inquiry)">-->
<!--                            <i class="i-icon i-trash bg-dark ml-1 sm" aria-hidden="true"></i>-->
<!--                            <span class="ml-3 f-3 font-weight-bold">Decline</span>-->
<!--                          </button>-->
<!--                        </div>-->
<!--                      </div>-->
<!--                    </div>-->
<!--                  </td>-->
<!--                </ng-container>-->
<!--                <tr mat-header-row *matHeaderRowDef="DISPLAY_INQUIRY_COLUMNS"></tr>-->
<!--                <tr mat-row *matRowDef="let element; columns: DISPLAY_INQUIRY_COLUMNS;"-->
<!--                    class="example-element-row"-->
<!--                >-->
<!--                </tr>-->
<!--              </table>-->
<!--            </ng-container>-->
<!--          </ng-container>-->
        <table class="table has-sticky-header">
          <thead>
            <ng-container [ngSwitch]="selectedTab.id">
              <tr *ngSwitchCase="'inquiry'">
                <th class="subject">
                  <div class="v-center c-pointer head-sort" (click)="sort('inquiry', 'subject')">
                    <span [class]="isSelectedSort('inquiry', 'subject') ? 'font-weight-bold c-dark' : ''">Subject</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('inquiry', 'subject') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('inquiry', 'subject')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('inquiry', 'organizer')">
                    <span [class]="isSelectedSort('inquiry', 'organizer') ? 'font-weight-bold c-dark' : ''">Organizer</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('inquiry', 'organizer') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('inquiry', 'organizer')"></i>
                  </div>
                </th>
                <th class="date-time">
                  <div class="v-center c-pointer head-sort" (click)="sort('inquiry', 'proposed')">
                    <span [class]="isSelectedSort('inquiry', 'proposed') ? 'font-weight-bold c-dark' : ''">proposed times</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('inquiry', 'proposed') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('inquiry', 'proposed')"></i>
                  </div>
                </th>
                <th class="call-status">
                  <div class="v-center c-pointer head-sort" (click)="sort('inquiry', 'inquired')">
                    <span [class]="isSelectedSort('inquiry', 'inquired') ? 'font-weight-bold c-dark' : ''">inquired</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('inquiry', 'inquired') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('inquiry', 'inquired')"></i>
                  </div>
                </th>
                <th class="team-actions"></th>
              </tr>
              <tr *ngSwitchCase="'sent'">
                <th class="subject">
                  <div class="v-center c-pointer head-sort" (click)="sort('sent', 'subject')">
                    <span [class]="isSelectedSort('sent', 'subject') ? 'font-weight-bold c-dark' : ''">Subject</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('sent', 'subject') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('sent', 'subject')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('sent', 'leader')">
                    <span [class]="isSelectedSort('sent', 'leader') ? 'font-weight-bold c-dark' : ''">leader</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('sent', 'leader') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('sent', 'leader')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('sent', 'contacts')">
                    <span [class]="isSelectedSort('sent', 'contacts') ? 'font-weight-bold c-dark' : ''">contacts</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('sent', 'contacts') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('sent', 'contacts')"></i>
                  </div>
                </th>
                <th class="date-time">
                  <div class="v-center c-pointer head-sort" (click)="sort('sent', 'proposed')">
                    <span [class]="isSelectedSort('sent', 'proposed') ? 'font-weight-bold c-dark' : ''">proposed times</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('sent', 'proposed') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('sent', 'proposed')"></i>
                  </div>
                </th>
                <th class="team-actions"></th>
              </tr>
              <tr *ngSwitchCase="'scheduled'">
                <th class="subject">
                  <div class="v-center c-pointer head-sort" (click)="sort('scheduled', 'subject')">
                    <span [class]="isSelectedSort('scheduled', 'subject') ? 'font-weight-bold c-dark' : ''">Subject</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('scheduled', 'subject') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('scheduled', 'subject')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('scheduled', 'organizer')">
                    <span [class]="isSelectedSort('scheduled', 'organizer') ? 'font-weight-bold c-dark' : ''">organizer</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('scheduled', 'organizer') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('scheduled', 'organizer')"></i>
                  </div>
                </th>
                <th class="leader">
                  <div class="v-center c-pointer head-sort" (click)="sort('scheduled', 'leader')">
                    <span [class]="isSelectedSort('scheduled', 'leader') ? 'font-weight-bold c-dark' : ''">leader</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('scheduled', 'leader') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('scheduled', 'leader')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('scheduled', 'contacts')">
                    <span [class]="isSelectedSort('scheduled', 'contacts') ? 'font-weight-bold c-dark' : ''">contacts</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('scheduled', 'contacts') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('scheduled', 'contacts')"></i>
                  </div>
                </th>
                <th class="date-time">
                  <div class="v-center c-pointer head-sort" (click)="sort('scheduled', 'schedule')">
                    <span [class]="isSelectedSort('scheduled', 'schedule') ? 'font-weight-bold c-dark' : ''">date & time</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('scheduled', 'schedule') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('scheduled', 'schedule')"></i>
                  </div>
                </th>
                <th class="team-actions"></th>
              </tr>
              <tr *ngSwitchCase="'completed'">
                <th class="subject">
                  <div class="v-center c-pointer head-sort" (click)="sort('completed', 'subject')">
                    <span [class]="isSelectedSort('completed', 'subject') ? 'font-weight-bold c-dark' : ''">Subject</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('completed', 'subject') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('completed', 'subject')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('completed', 'organizer')">
                    <span [class]="isSelectedSort('completed', 'organizer') ? 'font-weight-bold c-dark' : ''">organizer</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('completed', 'organizer') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('completed', 'organizer')"></i>
                  </div>
                </th>
                <th class="leader">
                  <div class="v-center c-pointer head-sort" (click)="sort('completed', 'leader')">
                    <span [class]="isSelectedSort('completed', 'leader') ? 'font-weight-bold c-dark' : ''">leader</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('completed', 'leader') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('completed', 'leader')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('completed', 'contacts')">
                    <span [class]="isSelectedSort('completed', 'contacts') ? 'font-weight-bold c-dark' : ''">contacts</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('completed', 'contacts') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('completed', 'contacts')"></i>
                  </div>
                </th>
                <th class="date-time">
                  <div class="v-center c-pointer head-sort" (click)="sort('completed', 'schedule')">
                    <span [class]="isSelectedSort('completed', 'schedule') ? 'font-weight-bold c-dark' : ''">date & time</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('completed', 'schedule') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('completed', 'schedule')"></i>
                  </div>
                </th>
                <th class="team-actions"></th>
              </tr>
              <tr *ngSwitchCase="'canceled'">
                <th class="subject">
                  <div class="v-center c-pointer head-sort" (click)="sort('canceled', 'subject')">
                    <span [class]="isSelectedSort('canceled', 'subject') ? 'font-weight-bold c-dark' : ''">Subject</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('canceled', 'subject') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('canceled', 'subject')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('canceled', 'organizer')">
                    <span [class]="isSelectedSort('canceled', 'organizer') ? 'font-weight-bold c-dark' : ''">organizer</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('canceled', 'organizer') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('canceled', 'organizer')"></i>
                  </div>
                </th>
                <th class="leader">
                  <div class="v-center c-pointer head-sort" (click)="sort('canceled', 'leader')">
                    <span [class]="isSelectedSort('canceled', 'leader') ? 'font-weight-bold c-dark' : ''">leader</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('canceled', 'leader') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('canceled', 'leader')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('canceled', 'contacts')">
                    <span [class]="isSelectedSort('canceled', 'contacts') ? 'font-weight-bold c-dark' : ''">contacts</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('canceled', 'contacts') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('canceled', 'contacts')"></i>
                  </div>
                </th>
                <th class="date-time">
                  <div class="v-center c-pointer head-sort" (click)="sort('canceled', 'schedule')">
                    <span [class]="isSelectedSort('canceled', 'schedule') ? 'font-weight-bold c-dark' : ''">date & time</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('canceled', 'schedule') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('canceled', 'schedule')"></i>
                  </div>
                </th>
                <th class="team-actions"></th>
              </tr>
              <tr *ngSwitchCase="'denied'">
                <th class="subject">
                  <div class="v-center c-pointer head-sort" (click)="sort('denied', 'subject')">
                    <span [class]="isSelectedSort('denied', 'subject') ? 'font-weight-bold c-dark' : ''">Subject</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('denied', 'subject') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('denied', 'subject')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('denied', 'organizer')">
                    <span [class]="isSelectedSort('denied', 'organizer') ? 'font-weight-bold c-dark' : ''">organizer</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('denied', 'organizer') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('denied', 'organizer')"></i>
                  </div>
                </th>
                <th class="leader">
                  <div class="v-center c-pointer head-sort" (click)="sort('denied', 'leader')">
                    <span [class]="isSelectedSort('denied', 'leader') ? 'font-weight-bold c-dark' : ''">leader</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('denied', 'leader') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('denied', 'leader')"></i>
                  </div>
                </th>
                <th class="organizer">
                  <div class="v-center c-pointer head-sort" (click)="sort('denied', 'contacts')">
                    <span [class]="isSelectedSort('denied', 'contacts') ? 'font-weight-bold c-dark' : ''">contacts</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('denied', 'contacts') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('denied', 'contacts')"></i>
                  </div>
                </th>
                <th class="date-time">
                  <div class="v-center c-pointer head-sort" (click)="sort('denied', 'schedule')">
                    <span [class]="isSelectedSort('denied', 'schedule') ? 'font-weight-bold c-dark' : ''">date & time</span>
                    <i class="i-icon d-block bgc-black ml-2"
                       [class]="getSearchCondition('denied', 'schedule') ? 'i-sort-down' : 'i-sort-up'" *ngIf="isSelectedSort('denied', 'schedule')"></i>
                  </div>
                </th>
                <th class="team-actions"></th>
              </tr>
            </ng-container>
          </thead>
          <tbody>
            <tr *ngFor="let call of pageData[selectedTab.id] | paginate: {id: selectedTab.id + 'CallPages', itemsPerPage: pageSize.id, currentPage: page[selectedTab.id], totalItems: total[selectedTab.id]}">
              <ng-container [ngSwitch]="selectedTab.id">
                <ng-container *ngSwitchCase="'inquiry'">
                  <td class="subject c-pointer" (click)="openCall(call)">
                    <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                    <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                  </td>
                  <td class="organizer c-pointer" (click)="showProfile(call.user)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.user.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.user.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                    </div>
                  </td>
                  <td class="date-time c-pointer" (click)="openCall(call)">
                    <div class="" *ngFor="let time of (call.proposed_at | slice:0:2)">
                      {{time | date: 'MMM dd yyyy, hh:mm a'}}
                    </div>
                    <div class="op-75" *ngIf="call.proposed_at.length > 2">
                      + {{call.proposed_at.length - 2}} more options
                    </div>
                  </td>
                  <td class="call-status c-pointer">
                    {{call.created_at | date: 'MMM dd yyyy, hh:mm a'}}
                  </td>
                  <td class="team-actions">
                    <div class="v-center justify-content-end">
                      <ng-container *ngIf="isOrganizer(call); else noneOrganizerTemplate">
                        <button class="btn delete-btn v-center" (click)="delete(call)" placement="bottom" ngbTooltip="Delete" ngbButtonLabel>
                          <i class="i-icon i-trash bgc-dark d-block" aria-hidden="true"></i>
                        </button>
                      </ng-container>
                      <ng-template #noneOrganizerTemplate>
                        <button class="btn" (click)="decline(call)" placement="bottom" ngbTooltip="Decline" ngbButtonLabel>
                          <i class="i-icon i-block bgc-dark d-block" aria-hidden="true"></i>
                        </button>
                        <button class="btn ml-2" (click)="accept(call)" placement="bottom" ngbTooltip="Accept" ngbButtonLabel>
                          <i class="i-icon i-check bgc-dark d-block" aria-hidden="true"></i>
                        </button>
                      </ng-template>
                    </div>
                  </td>
                </ng-container>
                <ng-container *ngSwitchCase="'sent'">
                  <td class="subject c-pointer" (click)="openCall(call)">
                    <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                    <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                  </td>
                  <td class="organizer c-pointer" (click)="showProfile(call.leader)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                    </div>
                  </td>
                  <td class="organizer c-pointer" (click)="openCall(call)">
                    <div class="v-center" *ngIf="call.contacts && call.contacts.length">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.contacts[0].picture_profile; else prospectNamePlaceholder">
                          <img [src]="call.contacts[0].picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #prospectNamePlaceholder>
                          <div class="name-avatar">{{getAvatarName(call.contacts[0])}}</div>
                        </ng-template>
                      </div>
                      <div>
                        <div class="f-3 ml-2 member-name">{{getContactName(call.contacts[0])}}</div>
                        <div class="f-3 ml-2 op-75" *ngIf="call.contacts.length > 1">+ {{call.contacts.length - 1}} more contacts</div>
                      </div>
                    </div>
                  </td>
                  <td class="date-time c-pointer" (click)="openCall(call)">
                    <div class="" *ngFor="let time of (call.proposed_at | slice:0:2)">
                      {{time | date: 'MMM dd yyyy, hh:mm a'}}
                    </div>
                    <div class="op-75" *ngIf="call.proposed_at.length > 2">
                      + {{call.proposed_at.length - 2}} more options
                    </div>
                  </td>
                  <td class="team-actions">
                    <div class="v-center justify-content-end">
                      <button class="btn" (click)="edit(call)" placement="bottom" ngbTooltip="Edit" ngbButtonLabel>
                        <i class="i-icon i-edit bgc-dark d-block" aria-hidden="true"></i>
                      </button>
                      <button class="btn ml-2" (click)="delete(call)" placement="bottom" ngbTooltip="Delete" ngbButtonLabel>
                        <i class="i-icon i-trash bgc-dark d-block" aria-hidden="true"></i>
                      </button>
                    </div>
                  </td>
                </ng-container>
                <ng-container *ngSwitchCase="'scheduled'">
                  <td class="subject c-pointer" (click)="openCall(call)">
                    <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                    <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                  </td>
                  <td class="organizer c-pointer" (click)="showProfile(call.user)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.user.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.user.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                    </div>
                  </td>
                  <td class="leader c-pointer" (click)="showProfile(call.leader)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                    </div>
                  </td>
                  <td class="organizer c-pointer" (click)="openCall(call)">
                    <div class="v-center" *ngIf="call.contacts && call.contacts.length">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.contacts[0].picture_profile; else prospectNamePlaceholder">
                          <img [src]="call.contacts[0].picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #prospectNamePlaceholder>
                          <div class="name-avatar">{{getAvatarName(call.contacts[0])}}</div>
                        </ng-template>
                      </div>
                      <div>
                        <div class="f-3 ml-2 member-name">{{getContactName(call.contacts[0])}}</div>
                        <div class="f-3 ml-2 op-75" *ngIf="call.contacts.length > 1">+ {{call.contacts.length - 1}} more contacts</div>
                      </div>
                    </div>
                  </td>
                  <td class="date-time c-pointer" (click)="openCall(call)">
                    <div class="">
                      {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                    </div>
                  </td>
                  <td class="team-actions">
                    <div class="v-center justify-content-end">
                      <button class="btn" (click)="complete(call)" placement="bottom" ngbTooltip="Complete" ngbButtonLabel>
                        <i class="i-icon i-check bgc-dark d-block" aria-hidden="true"></i>
                      </button>
                      <button class="btn ml-2" (click)="cancel(call)" placement="bottom" ngbTooltip="Cancel" ngbButtonLabel>
                        <i class="i-icon i-block bgc-dark d-block" aria-hidden="true"></i>
                      </button>
                    </div>
                  </td>
                </ng-container>
                <ng-container *ngSwitchCase="'completed'">
                  <td class="subject c-pointer" (click)="openCall(call)">
                    <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                    <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                  </td>
                  <td class="organizer c-pointer" (click)="showProfile(call.user)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.user.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.user.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                    </div>
                  </td>
                  <td class="leader c-pointer" (click)="showProfile(call.leader)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                    </div>
                  </td>
                  <td class="organizer c-pointer" (click)="openCall(call)">
                    <div class="v-center" *ngIf="call.contacts && call.contacts.length">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.contacts[0].picture_profile; else prospectNamePlaceholder">
                          <img [src]="call.contacts[0].picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #prospectNamePlaceholder>
                          <div class="name-avatar">{{getAvatarName(call.contacts[0])}}</div>
                        </ng-template>
                      </div>
                      <div>
                        <div class="f-3 ml-2 member-name">{{getContactName(call.contacts[0])}}</div>
                        <div class="f-3 ml-2 op-75" *ngIf="call.contacts.length > 1">+ {{call.contacts.length - 1}} more contacts</div>
                      </div>
                    </div>
                  </td>
                  <td class="date-time c-pointer" (click)="openCall(call)">
                    {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                  </td>
                  <td class="team-actions">
                    <div class="v-center justify-content-end">
                      <button class="btn" (click)="delete(call)" placement="bottom" ngbTooltip="Delete" ngbButtonLabel>
                        <i class="i-icon i-trash bgc-dark d-block" aria-hidden="true"></i>
                      </button>
                    </div>
                  </td>
                </ng-container>
                <ng-container *ngSwitchCase="'canceled'">
                  <td class="subject c-pointer" (click)="openCall(call)">
                    <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                    <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                  </td>
                  <td class="organizer c-pointer" (click)="showProfile(call.user)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.user.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.user.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                    </div>
                  </td>
                  <td class="leader c-pointer" (click)="showProfile(call.leader)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                    </div>
                  </td>
                  <td class="organizer c-pointer" (click)="openCall(call)">
                    <div class="v-center" *ngIf="call.contacts && call.contacts.length">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.contacts[0].picture_profile; else prospectNamePlaceholder">
                          <img [src]="call.contacts[0].picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #prospectNamePlaceholder>
                          <div class="name-avatar">{{getAvatarName(call.contacts[0])}}</div>
                        </ng-template>
                      </div>
                      <div>
                        <div class="f-3 ml-2 member-name">{{getContactName(call.contacts[0])}}</div>
                        <div class="f-3 ml-2 op-75" *ngIf="call.contacts.length > 1">+ {{call.contacts.length - 1}} more contacts</div>
                      </div>
                    </div>
                  </td>
                  <td class="date-time c-pointer" (click)="openCall(call)">
                    {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                  </td>
                  <td class="team-actions">
                    <div class="v-center justify-content-end">
                      <button class="btn" (click)="reschedule(call)" placement="bottom" ngbTooltip="Reschedule" ngbButtonLabel>
                        <i class="i-icon i-timer bgc-dark d-block" aria-hidden="true"></i>
                      </button>
                      <button class="btn ml-2" (click)="delete(call)" placement="bottom" ngbTooltip="Delete" ngbButtonLabel>
                        <i class="i-icon i-trash bgc-dark d-block" aria-hidden="true"></i>
                      </button>
                    </div>
                  </td>
                </ng-container>
                <ng-container *ngSwitchCase="'denied'">
                  <td class="subject c-pointer" (click)="openCall(call)">
                    <div class="c-blue f-3 font-weight-bold">{{call.subject}}</div>
                    <div class="c-dark opacity-6 f-3">{{call.description || '' | stripTags | shorten: 40: '...'}}</div>
                  </td>
                  <td class="organizer c-pointer" (click)="showProfile(call.user)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.user.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.user.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.user.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.user.user_name}}</div>
                    </div>
                  </td>
                  <td class="leader c-pointer" (click)="showProfile(call.leader)">
                    <div class="v-center">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.leader.picture_profile; else userProfilePlaceholder">
                          <img [src]="call.leader.picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #userProfilePlaceholder>
                          <div class="name-avatar">
                            {{call.leader.user_name[0]}}
                          </div>
                        </ng-template>
                      </div>
                      <div class="f-3 ml-2 member-name">{{call.leader.user_name}}</div>
                    </div>
                  </td>
                  <td class="organizer c-pointer" (click)="openCall(call)">
                    <div class="v-center" *ngIf="call.contacts && call.contacts.length">
                      <div class="member-avatar">
                        <ng-container *ngIf="call.contacts[0].picture_profile; else prospectNamePlaceholder">
                          <img [src]="call.contacts[0].picture_profile" class="avatar" />
                        </ng-container>
                        <ng-template #prospectNamePlaceholder>
                          <div class="name-avatar">{{getAvatarName(call.contacts[0])}}</div>
                        </ng-template>
                      </div>
                      <div>
                        <div class="f-3 ml-2 member-name">{{getContactName(call.contacts[0])}}</div>
                        <div class="f-3 ml-2 op-75" *ngIf="call.contacts.length > 1">+ {{call.contacts.length - 1}} more contacts</div>
                      </div>
                    </div>
                  </td>
                  <td class="date-time c-pointer" (click)="openCall(call)">
                    {{call.confirmed_at | date: 'MMM dd yyyy, hh:mm a'}}
                  </td>
                  <td class="team-actions">
                    <ng-container *ngIf="isOrganizer(call); else noneOrganizerActionTemplate">
                      <div class="v-center justify-content-end">
                        <button class="btn mr-2" (click)="reschedule(call)" placement="bottom" ngbTooltip="Reschedule" ngbButtonLabel>
                          <i class="i-icon i-timer bgc-dark d-block" aria-hidden="true"></i>
                        </button>
                        <button class="btn" (click)="delete(call)" placement="bottom" ngbTooltip="Delete" ngbButtonLabel>
                          <i class="i-icon i-trash bgc-dark d-block" aria-hidden="true"></i>
                        </button>
                      </div>
                    </ng-container>
                    <ng-template #noneOrganizerActionTemplate>
                      <div class="v-center justify-content-end">
                        <button class="btn" (click)="delete(call)" placement="bottom" ngbTooltip="Delete" ngbButtonLabel>
                          <i class="i-icon i-trash bgc-dark d-block" aria-hidden="true"></i>
                        </button>
                      </div>
                    </ng-template>
                  </td>
                </ng-container>
              </ng-container>
            </tr>
          </tbody>
        </table>
        <div class="my-2 table-control mode-1 py-3">
          <div class="pagination-wrapper m-auto">
            <pagination-controls
              (pageChange)="changePage($event)"
              (pageBoundsCorrection)="pageChanged($event)"
              id="{{selectedTab.id}}CallPages"
              maxSize="5"
              previousLabel=""
              nextLabel="">
            </pagination-controls>
          </div>
        </div>
      </ng-container>
      <ng-template #emptyTable>
        <div class="list-loading text-center"
          *ngIf="loading[selectedTab.id]; else emptyList">
          <div class="loader mt-5 lg"></div>
          <ng-container [ngSwitch]="selectedTab.id">
            <h4 class="fw-600 mt-2" *ngSwitchCase="'inquiry'">Loading call requests from others...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'sent'">Loading my call requests...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'scheduled'">Loading scheduled calls...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'completed'">Loading completed calls...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'canceled'">Loading canceled calls...</h4>
            <h4 class="fw-600 mt-2" *ngSwitchCase="'denied'">Loading declined calls...</h4>
          </ng-container>
        </div>
        <ng-template #emptyList>
          <div class="empty-list py-5">
            <div class="object-icon v-center">
              <i class="i-icon i-group-call d-block bgc-dark"></i>
            </div>
            <ng-container [ngSwitch]="selectedTab.id">
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'inquiry'">
                There is no call request from others</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'sent'">
                You did not make any call requests.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'scheduled'">
                There is no scheduled calls.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'completed'">
                There is no completed calls yet.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'canceled'">
                There is no canceled calls.</h4>
              <h4 class="font-weight-bold mt-4 mb-3" *ngSwitchCase="'denied'">
                There is no declined calls.</h4>
            </ng-container>
          </div>
        </ng-template>
      </ng-template>
    </div>
  </div>
</div>
