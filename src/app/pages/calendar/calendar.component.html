<div class="page-content">
    <div class="text-center">
        <!-- <h3 *ngIf="!user.connect_calendar" class="bg-white px-3 py-2 connect-calendar">
            Click <a class="text-primary font-weight-bold" (click)="connectCalendar()">here</a> to connect your calendar
        </h3> -->
    </div>
    <div class="c-dark font-weight-bold page-title">
        Calendar
    </div>
    <div class="v-center justify-content-end my-3 calendar-time">
        <button class="v-center btn btn-blue f-4 font-weight-bold text-white mr-2">
            <i class="i-icon i-plus bg-white d-block mr-2"></i>
            New meeting
        </button>
        <button class="v-center btn-blue text-white small-button mr-2">
            <i class="i-icon i-plus bg-white d-block"></i>
        </button>
        <div class="v-center">
            <mat-icon
            class="text-primary"
            mwlCalendarPreviousView
            [view]="view"
            [(viewDate)]="viewDate"
            (viewDateChange)="calendarDateChange()"
            >
            keyboard_arrow_left
            </mat-icon>
            <mat-icon
            class="text-primary"
            mwlCalendarNextView
            [view]="view"
            [(viewDate)]="viewDate"
            (viewDateChange)="calendarDateChange()"
            >
            keyboard_arrow_right
            </mat-icon>
        </div>
        <div class="v-center mr-2 justify-content-center c-dark date">
            <!-- {{ viewDate | calendarDate: view + 'ViewTitle':locale }} -->
            <span class="desktop" *ngIf="view == 'month'">
                {{viewDate | date:'MMMM y'}}
            </span>
            <span class="desktop" *ngIf="view == 'week'">
                {{weekStart}} - {{weekEnd}} {{viewDate | date:'MMMM y'}}
            </span>
            <span class="desktop" *ngIf="view == 'day'">
                {{viewDate | date:'EEEE, MMMM d y'}}
            </span>
            <span class="mobile" *ngIf="view == 'month'">
                {{viewDate | date:'MMM y'}}
            </span>
            <span class="mobile" *ngIf="view == 'week'">
                {{weekStart}} - {{weekEnd}} {{viewDate | date:'MMM y'}}
            </span>
            <span class="mobile" *ngIf="view == 'day'">
                {{viewDate | date:'EEE, MMM d y'}}
            </span>
        </div>
        <div class="v-center text-primary" ngbDropdown>
            <div ngbDropdownToggle>
            </div>
            <div ngbDropdownMenu class="light">
                <div class="dropdown-item c-dark" (click)="calendarChange('month')">
                    Month
                </div>
                <div class="dropdown-item c-dark" (click)="calendarChange('week')">
                    Week
                </div>
                <div class="dropdown-item c-dark" (click)="calendarChange('day')">
                    Day
                </div>
            </div>
        </div>
    </div>
    <ng-template #customCellTemplate let-day="day" let-locale="locale" let-eventClicked="eventClicked">
        <div class="cal-cell-top mt-1 mb-2">
        <span class="cal-day-number">
            {{ day.date | calendarDate:'monthViewDayNumber':locale }}
        </span>
        </div>
        <div *ngIf="day.events.length > 0">
            <div *ngFor="let event of day.events">
                <div class="d-flex align-items-center px-2 py-1 m-0 cal-events" (mwlClick)="eventClicked.emit({event: event})">
                <div class="cal-events-header mr-1">
                </div>
                <div class="d-flex cal-events-body">
                    <span class="cal-events-time mr-1">{{event.start | date:'shortTime'}}</span>
                    <span class="cal-events-title">{{event.title}}</span>
                </div>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template #monthHeaderTemplate let-days="days" let-locale="locale">
        <div class="v-center cal-header py-2">
            <div class="cal-header-cell desktop" *ngFor="let day of days">
                <span>{{ day.date | date:'EEEE' }}</span>
            </div>
            <div class="cal-header-cell mobile" *ngFor="let day of days">
                <span>{{ day.date | date:'EEE' }}</span>
            </div>
        </div>
    </ng-template>
    <ng-template #weekHeaderTemplate let-days="days" let-locale="locale" let-dayHeaderClicked="dayHeaderClicked">
        <div class="cal-day-headers">
            <div
                class="cal-header"
                *ngFor="let day of days"
                mwlDroppable
                (mwlClick)="dayHeaderClicked.emit({ day: day, sourceEvent: $event })"
                [class.cal-today]="day.isToday"
                [class.cal-weekend]="day.isWeekend"
            >
                <b>{{ day.date | date:'d' }}</b>
                <br />
                <span class="desktop">
                    {{ day.date | date:'EEEE' }}
                </span>
                <span class="mobile">
                    {{ day.date | date:'EEE' }}
                </span>
            </div>
        </div>
    </ng-template>
    <div [ngSwitch]="view">
        <mwl-calendar-month-view
        *ngSwitchCase="CalendarView.Month"
        [viewDate]="viewDate"
        [events]="events"
        (dayClicked)="dayClicked($event.day)"
        [cellTemplate]="customCellTemplate"
        [headerTemplate]="monthHeaderTemplate"
        (eventClicked)="handleEvent($event.event)"
        >
        </mwl-calendar-month-view>
        <mwl-calendar-week-view
        *ngSwitchCase="CalendarView.Week"
        [viewDate]="viewDate"
        [events]="events"
        [headerTemplate]="weekHeaderTemplate"
        (hourSegmentClicked)="hourClicked($event.date)"
        >
        </mwl-calendar-week-view>
        <mwl-calendar-day-view
        *ngSwitchCase="CalendarView.Day"
        [viewDate]="viewDate"
        [events]="events"
        (hourSegmentClicked)="hourClicked($event.date)"
        >
        </mwl-calendar-day-view>
    </div>
    <!-- <ng-container *ngIf="isLoading">
    <div class="px-3 pb-3">
        <div class="bg-white rounded">
        <app-loading-overlay [type]="'screen'"></app-loading-overlay>
        </div>
    </div>
    </ng-container> -->
</div>