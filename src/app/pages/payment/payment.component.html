<form #paymentForm="ngForm" (ngSubmit)="paymentSubmitted=true; paymentForm.form.valid ? createBill() : false;">
    <span class="f-4 font-weight-bold mb-1">Detail information</span>
    <div class="row">
        <div class="col-sm-3 form-group">
            <label for="payment-method" class="font-weight-bold mr-auto">payment method</label>
            <div class="payment-card">
                <div class="f-1 font-weight-bold p-3">
                    CREDIT CARD
                </div>
                <div class="card-type px-3 pt-4">
                    <ng-container [ngSwitch]="payment.card_brand">
                        <img src="../../../assets/img/visa.svg" *ngSwitchCase="'Visa'">
                        <img src="../../../assets/img/amex.svg" *ngSwitchCase="'Amex'">
                        <img src="../../../assets/img/master.svg" *ngSwitchCase="'Mastercard'">
                        <img src="../../../assets/img/jcb.svg" *ngSwitchCase="'Jcb'">
                        <img src="../../../assets/img/discover.svg" *ngSwitchCase="'Discover'">
                        <img src="../../../assets/img/diners.svg" *ngSwitchCase="'Diners'">
                    </ng-container>
                </div>
                <div class="v-center justify-content-between px-3 pb-3">
                    <div class="f-4 font-weight-bold">
                        {{payment.exp_month}}/{{payment.exp_year}}
                    </div>
                    <div class="f-4 font-weight-bold">
                        ****{{payment.last4}}
                    </div>
                </div>
            </div>
            <div class="f-1 text-center mt-4 px-5 unsubscribe">If you want to unsubscribe your payment method click here.</div>
        </div>
        <div class="col-sm-4 ml-3">
            <div class="form-group" [ngClass]="{invalid: paymentForm.submitted && cardname.invalid && (cardname.dirty || cardname.touched || paymentForm.submitted)}">
                <div class="d-flex">
                    <label for="card_name">name on card</label>
                    <span class="error" *ngIf="cardname.errors">
                        <ng-container *ngIf="cardname.errors.required">Required!</ng-container>
                    </span>
                </div>
                <input type="text" class="form-control" [(ngModel)]="card.name" id="cardname" name="cardname" #cardname="ngModel" required>
            </div>
            <div class="form-group mt-3" [ngClass]="{invalid: paymentForm.submitted && cardnumber.invalid && (cardnumber.dirty || cardnumber.touched || paymentForm.submitted)}">
                <div class="d-flex">
                    <label for="card_number">card number</label>
                    <span class="error" *ngIf="cardnumber.errors">
                        <ng-container *ngIf="cardnumber.errors.required">Required!</ng-container>
                        <ng-container *ngIf="cardnumber.errors.minlength">Invalid!</ng-container>
                    </span>
                </div>
                <input
                    type="text"
                    placeholder="eg. 1234 5678 9012 3456"
                    class="form-control"
                    [(ngModel)]="card.number"
                    id="cardnumber"
                    name="cardnumber"
                    #cardnumber="ngModel"
                    required
                    minlength="{{cardNumberLen}}"
                    [cleave]="creditCardInput"
                >
            </div>
            <div class="form-group mt-3" [ngClass]="{invalid: paymentForm.submitted && cardcvc.invalid && (cardcvc.dirty || cardcvc.touched || paymentForm.submitted)}">
                <div class="d-flex">
                    <label for="card_cvc">card cvc</label>
                    <span class="error" *ngIf="cardcvc.errors">
                        <ng-container *ngIf="cardcvc.errors.required">Required!</ng-container>
                        <ng-container *ngIf="cardcvc.errors.minlength || cardcvc.errors.maxlength">Invalid!</ng-container>
                    </span>
                </div>
                <input
                    type="text"
                    placeholder="eg. 512"
                    class="form-control"
                    [(ngModel)]="card.cvc"
                    id="cardcvc"
                    name="cardcvc"
                    #cardcvc="ngModel"
                    required
                    minlength="3"
                    maxlength="5"
                    [cleave]="credCvcInput"
                >
            </div>
            <div class="row">
                <div class="col-md-6 pr-md-1">
                  <div class="form-group" [class.has-error]="expMonth.errors && (expMonth.touched || expMonth.dirty || paymentSubmitted ) && paymentSubmitted">
                    <label for="expMonth">Exp Month</label>
                    <select class="form-control br-default" id="expMonth" [(ngModel)]="card.exp_month" required name="expMonth" #expMonth="ngModel">
                      <option value="" selected disabled>Select Month</option>
                      <option *ngFor="let month of months" [value]="month.id">{{month.text}}</option>
                    </select>
                    <span class="invalid-feedback" *ngIf="expMonth.errors && (expMonth.touched || expMonth.dirty || paymentSubmitted ) && paymentSubmitted">
                      Expiry month is invalid.
                    </span>
                  </div>
                </div>
                <div class="col-md-6 pl-md-1">
                  <div class="form-group" [class.has-error]="expYear.errors && (expYear.touched || expYear.dirty || paymentSubmitted ) && paymentSubmitted">
                    <label for="expYear">Exp Year</label>
                    <select class="form-control br-default" id="expYear" [(ngModel)]="card.exp_year" required name="expYear" #expYear="ngModel">
                      <option value="" selected disabled>Select Year</option>
                      <option *ngFor="let year of years" [value]="year.id">{{year.text}}</option>
                    </select>
                    <span class="invalid-feedback" *ngIf="expYear.errors && (expYear.touched || expYear.dirty || paymentSubmitted ) && paymentSubmitted">
                      Expiry Year is invalid.
                    </span>
                  </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4 px-2">
        <h6 class="f-4 font-weight-bold mb-1">Your invoices</h6>
        <table class="table mt-2">
            <thead>
                <tr>
                    <th class="checkbox-col border-top-0">
                        <div class="custom-control custom-checkbox">
                            <input
                            type="checkbox"
                            class="custom-control-input"
                            id="selectAllInvoices"
                            />
                            <label
                            class="custom-control-label"
                            for="selectAllInvoices"
                            ></label>
                        </div>
                    </th>
                    <th class="number-col border-top-0">
                        <span class="f-1 c-dark">number</span>
                    </th>
                    <th class="payment-col border-top-0">
                        <span class="f-1 c-dark">payment date</span>
                    </th>
                    <th class="issue-col border-top-0">
                        <span class="f-1 c-dark">date of issue</span>
                    </th>
                    <th class="gross-col border-top-0 text-right">
                        <span class="f-1 c-dark">gross value</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let invoice of invoices; let index;">
                    <td class="checkbox-col">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="invoice-{{index}}">
                          <label class="custom-control-label" for="invoice-{{index}}"></label>
                        </div>
                    </td>
                    <td class="number-col f-4 font-weight-bold text-primary">
                        {{invoice.number}}
                    </td>
                    <td class="payment-col f-4 font-weight-bold">
                        {{invoice.payment_date}}
                    </td>
                    <td class="issue-col f-4 font-weight-bold">
                        {{invoice.issue_date}}
                    </td>
                    <td class="gross-col f-4 font-weight-bold text-right">
                        {{invoice.gross}}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <a class="btn c-dark font-weight-bold ml-auto mr-4 mt-4">Cancel</a>
        <button type="submit" class="btn btn-primary font-weight-bold mr-2 mt-4">Save changes</button>
    </div>
</form>